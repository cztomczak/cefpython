# KeyboardHandler callbacks #

This handler allows you to handle events related to keyboard input and is called only for the main frame.

For an example of how to implement handler see [cefpython](cefpython).CreateBrowser(). For a list of all handler interfaces see [API > Client handlers](API#Client_handlers).

## CEF 3 ##

bool **OnPreKeyEvent**([Browser](Browser) browser, `KeyEvent` event, `MSG*|GdkEvent*|NSEvent*` eventHandle, list& isKeyboardShortcutOut)

> Called before a keyboard event is sent to the renderer. |event| contains
> information about the keyboard event. |eventHandle| is the operating system
> event message, if any. Return true if the event was handled or false
> otherwise. If the event will be handled in `OnKeyEvent()` as a keyboard
> shortcut, set `isKeyboardShortcutOut[0]` to true and return false.

> `KeyEvent` is a dictionary with the following keys:

  * "**type**" (`KeyEventType`) - The type of keyboard event
  * "**modifiers**" (uint32) - Bit flags describing any pressed modifier keys. See `KeyEventFlags` for values.
  * "**windows\_key\_code**" (int) - The Windows key code for the key event. This value is used by the DOM specification. Sometimes it comes directly from the event (i.e. on Windows) and sometimes it's determined using a mapping function. See `"WebCore/platform/chromium/KeyboardCodes.h"` for the list of values.
  * "**native\_key\_code**" (int) - The actual key code genenerated by the platform.
  * "**is\_system\_key**" (int) - Indicates whether the event is considered a "system key" event (see http://msdn.microsoft.com/en-us/library/ms646286(VS.85).aspx for details). This value will always be false on non-Windows platforms.
  * "**character**" (wchar\_t or unsigned short) - The character generated by the keystroke.
  * "**unmodified\_character**" (wchar\_t or unsigned short) - Same as |character| but unmodified by any concurrently-held modifiers (except shift). This is useful for working out shortcut keys.
  * "**focus\_on\_editable\_field**" (bool) - True if the focus is currently on an editable field on the page. This is useful for determining if standard key events should be intercepted.

> `KeyEventType` is one of:

> `cefpython.KEYEVENT_RAWKEYDOWN`<br>
<blockquote><code>cefpython.KEYEVENT_KEYDOWN</code><br>
<code>cefpython.KEYEVENT_KEYUP</code><br>
<code>cefpython.KEYEVENT_CHAR</code><br></blockquote>

<blockquote><code>KeyEventFlags</code> constants ("modifiers" key):</blockquote>

<blockquote><code>cefpython.EVENTFLAG_NONE</code><br>
<code>cefpython.EVENTFLAG_CAPS_LOCK_ON</code><br>
<code>cefpython.EVENTFLAG_SHIFT_DOWN</code><br>
<code>cefpython.EVENTFLAG_CONTROL_DOWN</code><br>
<code>cefpython.EVENTFLAG_ALT_DOWN</code><br>
<code>cefpython.EVENTFLAG_LEFT_MOUSE_BUTTON</code><br>
<code>cefpython.EVENTFLAG_MIDDLE_MOUSE_BUTTON</code><br>
<code>cefpython.EVENTFLAG_RIGHT_MOUSE_BUTTON</code><br>
// Mac OS-X command key.<br>
<code>cefpython.EVENTFLAG_COMMAND_DOWN</code><br>
<code>cefpython.EVENTFLAG_NUM_LOCK_ON</code><br>
<code>cefpython.EVENTFLAG_IS_KEY_PAD</code><br>
<code>cefpython.EVENTFLAG_IS_LEFT</code><br>
<code>cefpython.EVENTFLAG_IS_RIGHT</code><br></blockquote>


bool <b>OnKeyEvent</b>(<a href='Browser'>Browser</a> browser, <code>KeyEvent</code> event, <code>MSG*|GdkEvent*|NSEvent*</code> eventHandle)<br>
<br>
<blockquote>Called after the renderer and <code>JavaScript</code> in the page has had a chance to<br>
handle the event. |event| contains information about the keyboard event.<br>
|os_event| is the operating system event message, if any. Return true if<br>
the keyboard event was handled or false otherwise.</blockquote>

<blockquote>Description of the <code>KeyEvent</code> type is in the <code>OnPreKeyEvent()</code> callback.</blockquote>

<h2>CEF 1</h2>

bool <b>OnKeyEvent</b>(<a href='Browser'>Browser</a> browser, int eventType, <a href='VirtualKey'>VirtualKey</a> keyCode, int modifiers, bool isSystemKey, bool isAfterJavascript)<br>
<br>
<blockquote>Called when the browser component receives a keyboard event. This method<br>
is called both before the event is passed to the renderer and after<br>
javascript in the page has had a chance to handle the event. <code>|type|</code> is the type of keyboard event, <code>|code|</code> is the windows scan-code for the event, <code>|modifiers|</code> is a set of bit- flags describing any pressed modifier keys and <code>|isSystemKey|</code> is true if Windows considers this a <a href='http://msdn.microsoft.com/en-us/library/ms646286(VS.85).aspx'>WM_SYSKEYDOWN </a> message.</blockquote>

<blockquote>If <code>|isAfterJavaScript|</code> is true then javascript in the page has had a chance to handle the event and has chosen not to. Only <code>KEYEVENT_RAWKEYDOWN</code>, <code>KEYEVENT_KEYDOWN</code> and<br>
<code>KEYEVENT_CHAR</code> events will be sent with |isAfterJavaScript| set to true. Return true if the keyboard event was handled or false to allow continued handling of the event by the renderer.</blockquote>

<blockquote><code>|eventType|</code> constants:</blockquote>

<blockquote><code>cefpython.KEYEVENT_RAWKEYDOWN</code><br>
<code>cefpython.KEYEVENT_KEYDOWN</code><br>
<code>cefpython.KEYEVENT_KEYUP</code><br>
<code>cefpython.KEYEVENT_CHAR</code><br></blockquote>

<blockquote>Example of implementing KeyboardHandler:</blockquote>

<pre><code>	def OnKeyEvent(browser, eventType, keyCode, modifiers, isSystemKey, isAfterJavascript):<br>
		# Let's bind developer tools to F12 key.<br>
		if keyCode == cefpython.VK_F12 and eventType == cefpython.KEYEVENT_RAWKEYDOWN and cefpython.IsKeyModifier(cefpython.KEY_NONE, modifiers) and not isSystemKey:<br>
			browser.ShowDevTools()<br>
			return True<br>
		# Bind F5 to refresh browser window.<br>
		if keyCode == cefpython.VK_F5 and eventType == cefpython.KEYEVENT_RAWKEYDOWN and cefpython.IsKeyModifier(cefpython.KEY_NONE, modifiers) and not isSystemKey:<br>
			browser.ReloadIgnoreCache()<br>
			return True<br>
		return False<br>
</code></pre>

<blockquote>To check against <code>|modifiers|</code> you can use function <a href='cefpython'>cefpython</a>.IsKeyModifier(<code>KEY_*</code>, modifiers) where <code>KEY_*</code> is one of:</blockquote>

<blockquote><code>cefpython.KEY_NONE</code> # neither of alt/shift/ctrl is pressed<br>
<code>cefpython.KEY_SHIFT</code><br>
<code>cefpython.KEY_CTRL</code><br>
<code>cefpython.KEY_ALT</code><br>
<code>cefpython.KEY_META</code><br>
<code>cefpython.KEY_KEYPAD</code><br>